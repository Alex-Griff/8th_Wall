!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)e.d(n,s,function(e){return t[e]}.bind(null,s));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";i.r(e);var n=i(1),s=(i.n(n),i(2)),a=(i.n(s),i(3)),r=(i.n(a),i(4));i.n(r)},function(){AFRAME.registerComponent("gesture-detector",{schema:{element:{default:""}},init:function(){this.targetElement=this.data.element&&document.querySelector(this.data.element),this.targetElement||(this.targetElement=this.el),this.internalState={previousState:null},this.emitGestureEvent=this.emitGestureEvent.bind(this),this.targetElement.addEventListener("touchstart",this.emitGestureEvent),this.targetElement.addEventListener("touchend",this.emitGestureEvent),this.targetElement.addEventListener("touchmove",this.emitGestureEvent)},remove:function(){this.targetElement.removeEventListener("touchstart",this.emitGestureEvent),this.targetElement.removeEventListener("touchend",this.emitGestureEvent),this.targetElement.removeEventListener("touchmove",this.emitGestureEvent)},emitGestureEvent(t){const e=this.getTouchState(t),i=this.internalState.previousState,n=i&&e&&e.touchCount==i.touchCount;if(i&&!n){const t=this.getEventPrefix(i.touchCount)+"fingerend";this.el.emit(t,i),this.internalState.previousState=null}if(e&&!n){e.startTime=performance.now(),e.startPosition=e.position,e.startSpread=e.spread;const t=this.getEventPrefix(e.touchCount)+"fingerstart";this.el.emit(t,e),this.internalState.previousState=e}if(n){const t={positionChange:{x:e.position.x-i.position.x,y:e.position.y-i.position.y}};e.spread&&(t.spreadChange=e.spread-i.spread),Object.assign(i,e),Object.assign(t,i);const n=this.getEventPrefix(e.touchCount)+"fingermove";this.el.emit(n,t)}},getTouchState:function(t){if(0==t.touches.length)return null;const e=[];for(let i=0;i<t.touches.length;i++)e.push(t.touches[i]);const i={touchCount:e.length},n=e.reduce((t,e)=>t+e.clientX,0)/e.length,s=e.reduce((t,e)=>t+e.clientY,0)/e.length;i.positionRaw={x:n,y:s};const a=2/(window.innerWidth+window.innerHeight);if(i.position={x:n*a,y:s*a},2<=e.length){const t=e.reduce((t,e)=>{var i=Math.pow;return t+Math.sqrt(i(n-e.clientX,2)+i(s-e.clientY,2))},0)/e.length;i.spread=t*a}return i},getEventPrefix:t=>["one","two","three","many"][Math.min(t,4)-1]})},function(){AFRAME.registerComponent("hold-drag",{schema:{cameraId:{default:"camera"},groundId:{default:"ground"},dragDelay:{default:300}},init:function(){this.camera=document.getElementById(this.data.cameraId),this.threeCamera=this.camera.getObject3D("camera"),this.ground=document.getElementById(this.data.groundId),this.internalState={fingerDown:!1,dragging:!1,distance:0,startDragTimeout:null,raycaster:new THREE.Raycaster};const t=document.createElement("a-ring");t.setAttribute("color","#0dd"),t.setAttribute("ring-inner","0.5"),t.setAttribute("ring-outer","0.75"),t.setAttribute("rotation","-90 0 0"),t.setAttribute("position","0 0.1 0"),this.tapRing=document.createElement("a-entity"),this.tapRing.id="tapRing",this.tapRing.setAttribute("visible","false"),this.tapRing.appendChild(t),this.el.sceneEl.appendChild(this.tapRing),this.fingerDown=this.fingerDown.bind(this),this.startDrag=this.startDrag.bind(this),this.fingerMove=this.fingerMove.bind(this),this.fingerUp=this.fingerUp.bind(this),this.el.addEventListener("mousedown",this.fingerDown),this.el.sceneEl.addEventListener("onefingermove",this.fingerMove),this.el.sceneEl.addEventListener("onefingerend",this.fingerUp)},tick:function(){if(this.internalState.dragging){let t=null;if(this.internalState.positionRaw){const e=this.internalState.positionRaw.x/document.body.clientWidth*2-1,i=this.internalState.positionRaw.y/document.body.clientHeight*2-1,n=new THREE.Vector2(e,-i);this.threeCamera=this.threeCamera||this.camera.getObject3D("camera"),this.internalState.raycaster.setFromCamera(n,this.threeCamera);const s=this.internalState.raycaster.intersectObject(this.ground.object3D,!0);if(0<s.length){const e=s[0];this.internalState.distance=e.distance,t=e.point}}t||(t=this.camera.object3D.localToWorld(new THREE.Vector3(0,0,-this.internalState.distance))),t.y=2,this.el.object3D.position.lerp(t,.2),this.tapRing.object3D.position.x=this.el.object3D.position.x,this.tapRing.object3D.position.z=this.el.object3D.position.z}},remove:function(){this.el.removeEventListener("mousedown",fingerDown),this.el.scene.removeEventListener("onefingermove",fingerMove),this.el.scene.removeEventListener("onefingerend",fingerUp),this.tapRing.parentNode.removeChild(this.tapRing)},fingerDown:function(t){this.internalState.fingerDown=!0,this.internalState.startDragTimeout=setTimeout(this.startDrag,this.data.dragDelay),this.internalState.positionRaw=t.detail.positionRaw},startDrag:function(){this.internalState.fingerDown&&(this.internalState.dragging=!0,this.internalState.distance=this.el.object3D.position.distanceTo(this.camera.object3D.position),this.tapRing.setAttribute("visible","true"),this.tapRing.object3D.scale.copy({x:.001,y:.001,z:.001}),this.tapRing.removeAttribute("animation__scale"),this.tapRing.setAttribute("animation__scale",{property:"scale",dur:300,from:"0.001 0.001 0.001",to:"1 1 1",easing:"easeOutQuad"}))},fingerMove:function(t){this.internalState.positionRaw=t.detail.positionRaw},fingerUp:function(){if(this.internalState.fingerDown=!1,clearTimeout(this.internalState.startDragTimeout),this.internalState.positionRaw=null,this.internalState.dragging){const t=this.el.object3D.position.clone();this.el.setAttribute("animation__drop",{property:"position",to:`${t.x} 0 ${t.z}`,dur:300,easing:"easeOutQuad"}),this.tapRing.removeAttribute("animation__scale"),this.tapRing.setAttribute("animation__scale",{property:"scale",dur:300,to:"0.001 0.001 0.001",easing:"easeInQuad"}),setTimeout(()=>this.tapRing.setAttribute("visible","false"),300)}this.internalState.dragging=!1}})},function(){AFRAME.registerComponent("pinch-scale",{schema:{min:{default:.3},max:{default:8}},init:function(){this.initialScale=this.el.object3D.scale.clone(),this.scaleFactor=1,this.handleEvent=this.handleEvent.bind(this),this.el.sceneEl.addEventListener("twofingermove",this.handleEvent)},remove:function(){this.el.sceneEl.removeEventListener("twofingermove",this.handleEvent)},handleEvent:function(t){this.scaleFactor*=1+t.detail.spreadChange/t.detail.startSpread,this.scaleFactor=Math.min(Math.max(this.scaleFactor,this.data.min),this.data.max),this.el.object3D.scale.x=this.scaleFactor*this.initialScale.x,this.el.object3D.scale.y=this.scaleFactor*this.initialScale.y,this.el.object3D.scale.z=this.scaleFactor*this.initialScale.z}})},function(){AFRAME.registerComponent("two-finger-spin",{schema:{factor:{default:5}},init:function(){this.handleEvent=this.handleEvent.bind(this),this.el.sceneEl.addEventListener("twofingermove",this.handleEvent)},remove:function(){this.el.sceneEl.removeEventListener("twofingermove",this.handleEvent)},handleEvent:function(t){this.el.object3D.rotation.y+=t.detail.positionChange.x*this.data.factor}})}]);